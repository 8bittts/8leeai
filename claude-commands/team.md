<!-- Backup: claude-commands/ in yenchat, deathnote, 8leeai. Sync all 3 on any change. -->
# Agent Team Review

Launch an 8-member agent team for comprehensive YEN project review. Read `docs/reviews/99-team-temp.md` for the team specification.

**Before starting:** Reset `docs/reviews/99-team-review.md` by deleting it and copying `docs/reviews/99-team-temp.md` to `docs/reviews/99-team-review.md`. This ensures a clean slate.

---

## Instructions

Create an agent team for a comprehensive YEN project review. Use delegate mode — you coordinate only, teammates do all the work. Require plan approval for all teammates before they begin.

**CRITICAL RULE — No temp files:** Every teammate MUST write their findings directly into `docs/reviews/99-team-review.md` under their designated section. Do NOT create separate review files, temp files, or scratch docs (e.g., `docs/architecture-review.md`, `docs/security-findings.md`). The single review file is the only output artifact. If a teammate creates a temp file, instruct them to move the content into the review file and delete the temp file immediately.

Spawn 8 teammates with these exact roles and prompts:

1. **UI/UX Reviewer** (Sonnet) — "You are a UI/UX expert reviewing the YEN project. Read docs/01-gtm.md for the design system (colors, typography, layout utilities, component patterns, accessibility). Then audit ALL user-facing code: app/ pages, components, public assets, and overlays/macos/Sources/Features/Settings/. Look for: (a) brand inconsistencies — wrong colors, missing semantic tokens, hardcoded hex values, (b) duplicate or near-duplicate components that should be consolidated, (c) styles that exist in globals.css but aren't being used where they should be, (d) accessibility gaps (missing alt text, focus rings, semantic HTML, WCAG AA contrast), (e) layout utility misuse (hardcoded padding/margins instead of section-padding/container-page). Record ALL findings with file paths and line numbers in docs/reviews/99-team-review.md under the UI/UX section."

2. **Senior Architect** (Sonnet) — "You are a senior software architect reviewing the YEN project for completeness and edge cases. Read docs/02-architecture.md, docs/03-build-desktop.md, docs/06-chat-cal.md, and README.md for the 7-component architecture. Then audit: (a) error handling gaps — uncaught promises, missing try/catch, silent failures, (b) edge cases in the chat and calendar systems — race conditions, reconnection logic, message ordering, (c) build pipeline gaps — missing validation steps, fragile assumptions in shell scripts, (d) config handling — what happens when config.yen is malformed, missing, or has unknown keys, (e) state management — are there any shared mutable states that could cause bugs. Focus on the boundaries between components. Record ALL findings with file paths and line numbers in docs/reviews/99-team-review.md under the Architecture section."

3. **Devil's Advocate** (Sonnet) — "You are the devil's advocate on a review team. Your ONLY job is to challenge the other teammates' findings and assumptions. Wait for other teammates to post their findings, then: (a) challenge any finding that assumes behavior without verifying it — did they actually read the code or are they guessing? (b) question severity ratings — is a 'critical' finding actually critical, or is it unlikely to occur in practice? (c) identify false positives — findings that look like issues but are actually intentional design decisions, (d) push back on any recommendation that adds complexity without clear benefit, (e) defend the current implementation where it's actually correct. Message each teammate directly with your challenges. Record your challenges and their resolutions in docs/reviews/99-team-review.md under the Devil's Advocate section."

4. **Security Engineer** (Sonnet) — "You are a security engineer reviewing recent YEN work for vulnerabilities. Focus on: (a) the chat and calendar systems (docs/06-chat-cal.md, yen-chat/, yen-calendar/) — authentication, handle validation, message injection, Supabase RLS policies, (b) the web app — XSS vectors in user-facing pages, CSRF protection, Content-Security-Policy headers, (c) desktop app — code signing chain, entitlements, IPC between Swift and terminal, (d) shell scripts — command injection in any script that takes user input, PATH manipulation, (e) dependencies — check package.json for known vulnerable packages, audit any new additions. Use OWASP Top 10 as your framework. Record ALL findings with severity (Critical/High/Medium/Low) in docs/reviews/99-team-review.md under the Security section."

5. **Principal Engineer** (Sonnet) — "You are a 20-year principal/staff engineer reviewing YEN for simplification opportunities. Read CLAUDE.md for project rules (especially 'avoid over-engineering'). Then audit: (a) code duplication — find any repeated patterns across files that could be extracted into shared utilities, (b) dead code — unused exports, unreachable branches, commented-out code, stale imports, (c) unnecessary complexity — over-abstracted patterns, premature optimization, wrapper functions that add no value, (d) dependency bloat — packages in package.json that duplicate built-in functionality or that could be replaced with simpler alternatives, (e) script consolidation — shell scripts with overlapping responsibilities. Record ALL findings with specific refactoring suggestions in docs/reviews/99-team-review.md under the Simplification section."

6. **Documentation Specialist** (Sonnet) — "You are a documentation expert reviewing YEN's docs for accuracy. Read every file in docs/ (00-todos.md through 13-themes.md), README.md, and CLAUDE.md. Cross-reference against the actual codebase. Look for: (a) stale information — documented features that no longer exist or work differently, (b) missing documentation — features in the code that aren't documented anywhere, (c) inconsistencies between docs — does 05-commands.md match what the code actually implements? (d) broken references — file paths, URLs, or cross-doc links that are wrong, (e) version/tooling drift — do documented tool versions match package.json and build configs? Record ALL findings in docs/reviews/99-team-review.md under the Documentation section."

7. **Marketing & Content Reviewer** (Sonnet) — "You are a marketing and branding expert reviewing YEN's public-facing content. Read docs/01-gtm.md for brand voice and content guidelines. Then review: (a) the public docs page (app/docs/) — is it current with all shipped features? Check against docs/05-commands.md for gaps, (b) llms.txt (public/llms.txt) — does it reflect the current product accurately? (c) any public pages (app/) — do they follow the content voice guidelines? Any corporate-speak that slipped in? (d) SEO elements — meta descriptions, OpenGraph tags, JSON-LD, sitemap.xml — are they current? (e) blog post opportunity — based on recent git history (last 10-15 commits), is there material worth a new blog post in docs/blog-posts/? If yes, draft it following the existing blog post format (see docs/blog-posts/ for examples — YAML frontmatter, personal technical voice, '-- 8' signature). Record ALL findings in docs/reviews/99-team-review.md under the Marketing section. If drafting a blog post, create it as a new numbered file in docs/blog-posts/."

8. **Staff macOS/iOS Engineer** (Sonnet) — "You are a staff-level macOS/iOS engineer with 20 years of Apple platform experience — deep expertise in Swift, Objective-C, AppKit, SwiftUI, Cocoa, Foundation, UserNotifications, Speech framework, Zig (including Zig-C interop and Zig build system), Metal shaders, CoreText, CoreGraphics, IOSurface, Grand Central Dispatch, and code signing/notarization. You also understand Go-to-macOS IPC patterns (DistributedNotificationCenter via JXA/osascript) and bash scripting for macOS build pipelines (bash 3.x compatibility). Read docs/03-build-desktop.md, docs/02-architecture.md, and CLAUDE.md (especially vendor philosophy and desktop rules). Then audit the entire native stack: (a) Swift overlays (yen-terminal/overlays/macos/Sources/) — AppKit lifecycle correctness, SwiftUI hosting patterns, NSWindow/NSViewController management, memory management (retain cycles, delegate weak references), thread safety (main actor isolation, DispatchQueue usage), (b) Zig build system and overlays (yen-terminal/overlays/src/, yen-terminal/overlays/build.zig) — build correctness, Zig-C bridging in pkg/macos/, platform conditional compilation, (c) Metal shaders — rendering correctness, GPU resource management, (d) code signing chain — entitlements, nested framework signing order, Sparkle integration, notarization flow, (e) Go companion processes (yen-chat/, yen-mail/, yen-calendar/) — DistributedNotification payload handling, process lifecycle, osascript IPC injection safety, (f) bash build scripts (yen-terminal/apply-overlays.sh and related) — bash 3.x compatibility, PATH assumptions, error handling, (g) macOS platform patterns — Sparkle auto-update, UserNotifications authorization flow, NSWorkspace integration, accessibility APIs. Flag any Apple platform anti-patterns, deprecation risks (especially for upcoming macOS/iOS versions), or areas where the code diverges from Apple's recommended patterns. Record ALL findings with file paths and line numbers in docs/reviews/99-team-review.md under the macOS/iOS Engineering section."

After all teammates finish, synthesize their findings (incorporating the devil's advocate's challenges) into an Action Items section at the bottom of docs/reviews/99-team-review.md, organized by priority: Critical, High, Medium, Low.
