@import "tailwindcss";
@import "tw-animate-css";

/* ============================================
   THEME SYSTEM CSS VARIABLES
   Applied via ThemeProvider JavaScript
   ============================================ */

:root {
  /* Theme colors (set by ThemeProvider, defaults to terminal) */
  --theme-bg: #000000;
  --theme-fg: #22c55e;
  --theme-primary: #22c55e;
  --theme-accent: #4ade80;
  --theme-muted: #15803d;
  --theme-border: #22c55e;

  /* Theme typography */
  --theme-font-primary: var(--font-mono), ui-monospace, monospace;

  /* Theme borders */
  --theme-border-width: 1px;
  --theme-border-style: solid;

  /* Theme shadows */
  --theme-shadow-hover: 0 0 10px rgba(34, 197, 94, 0.3);

  /* Component-specific variables */
  --not-found-bg-image: url("/mario.jpg");
  --matrix-opacity: 0.08;
  --theme-error: #ef4444;
}

@theme inline {
  /* Theme system colors for Tailwind */
  --color-theme-bg: var(--theme-bg);
  --color-theme-fg: var(--theme-fg);
  --color-theme-primary: var(--theme-primary);
  --color-theme-accent: var(--theme-accent);
  --color-theme-muted: var(--theme-muted);
  --color-theme-border: var(--theme-border);
}

/* SSR fallback theme styles - applied before hydration */
.ssr-theme-fallback {
  --theme-bg: #000000;
  --theme-fg: #22c55e;
}

@layer base {
  * {
    border-color: var(--theme-border);
    outline-color: color-mix(in oklch, var(--theme-primary) 50%, transparent);
  }
}

/* ============================================
   RETRO THEME SHARED STYLES
   Applied when data-theme-style includes "retro"
   ============================================ */

[data-theme-style~="retro"] {
  /* Force pixel-perfect rendering */
  image-rendering: pixelated;
  -webkit-font-smoothing: none;
  -moz-osx-font-smoothing: unset;
}

/* ============================================
   8-BIT THEME SPECIFIC STYLES
   Applied when data-theme="8bit"
   ============================================ */

/* 8-bit typography adjustments */
[data-theme="8bit"] h1,
[data-theme="8bit"] h2,
[data-theme="8bit"] h3 {
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

/* 8-bit link styling */
[data-theme="8bit"] a {
  text-decoration: none;
  border-bottom: 2px solid currentColor;
}

[data-theme="8bit"] a:hover {
  background-color: var(--theme-primary);
  color: var(--theme-bg);
}

/* 8-bit input styling */
[data-theme="8bit"] input {
  border-width: var(--theme-border-width);
  border-style: var(--theme-border-style);
  border-color: var(--theme-border);
  background: var(--theme-bg);
  color: var(--theme-fg);
  padding: var(--spacing-2, 0.5rem);
}

[data-theme="8bit"] input:focus {
  outline: none;
  box-shadow: var(--theme-shadow-hover);
}

/* 8-bit button base (via Tailwind classes in components) */
[data-theme="8bit"] button {
  text-transform: uppercase;
  letter-spacing: 0.1em;
}

/* 8-bit scrollbar */
[data-theme="8bit"]::-webkit-scrollbar {
  width: var(--spacing-3, 0.75rem);
  height: var(--spacing-3, 0.75rem);
}

[data-theme="8bit"]::-webkit-scrollbar-track {
  background: var(--theme-bg);
  border-width: calc(var(--theme-border-width) / 1.5);
  border-style: var(--theme-border-style);
  border-color: var(--theme-muted);
}

[data-theme="8bit"]::-webkit-scrollbar-thumb {
  background: var(--theme-primary);
  border-width: calc(var(--theme-border-width) / 1.5);
  border-style: var(--theme-border-style);
  border-color: var(--theme-bg);
}

[data-theme="8bit"]::-webkit-scrollbar-thumb:hover {
  background: var(--theme-accent);
}

/* ============================================
   THEME-SPECIFIC OVERRIDES
   Each theme is self-contained but may need
   CSS that can't be expressed in the definition
   ============================================ */

/* Gameboy uses retro shared styles */

/* Brutalist: 90s web link underlines */
[data-theme="brutalist"] a {
  text-decoration: underline;
}

/* Accessibility: No animations, forced focus */
[data-theme="accessibility"] * {
  transition: none !important;
  animation: none !important;
}

[data-theme="accessibility"] :focus {
  outline: 3px solid var(--theme-primary) !important;
  outline-offset: 2px !important;
}

/* Neon themes: high-contrast selection */
[data-theme-style~="neon"] ::selection {
  background: var(--theme-primary);
  color: var(--theme-bg);
}

/* ============================================
   REDUCED MOTION SUPPORT
   ============================================ */

@media (prefers-reduced-motion: reduce) {
  .animate-in,
  .animate-pulse,
  [class*="animate-["] {
    animation: none !important;
  }

  [data-theme-style~="motion-heavy"] * {
    transition: none !important;
  }
}
